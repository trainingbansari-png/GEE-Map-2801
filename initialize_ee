def initialize_ee():
    try:
        # Get service account info from Streamlit secrets (already a dict-like object)
        service_account_info = dict(st.secrets["GCP_SERVICE_ACCOUNT_JSON"])

        # Correct Earth Engine scope
        SCOPES = ['https://www.googleapis.com/auth/earthengine']

        # Create credentials
        credentials = service_account.Credentials.from_service_account_info(
            service_account_info,
            scopes=SCOPES
        )

        # Initialize Earth Engine
        ee.Initialize(credentials)

        return True

    except Exception as e:
        st.error(f"‚ùå Earth Engine init failed: {e}")
        return False
